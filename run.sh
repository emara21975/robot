#!/bin/bash
# ==========================================
# ๐ ุชุดุบูู ุงูุฑูุจูุช (Smart Run Script)
# ==========================================

# ุงูุงูุชูุงู ููุฌูุฏ ุงูุณูุฑุจุช (ูุถูุงู ุนูู ุงููุณุงุฑุงุช)
cd "$(dirname "$0")"

# ุงูุชุญูู ูู ูุฌูุฏ ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ ุงูุตุญูุญุฉ
if [ ! -d "venv" ]; then
    echo "โ๏ธ  ูู ูุชู ุงูุนุซูุฑ ุนูู ุจูุฆุฉ ุงูุชุดุบูู (venv)."
    echo "โ๏ธ  ุฌุงุฑู ุชุดุบูู ุงูุชุซุจูุช ุงูุฃููู ุชููุงุฆูุงู..."
    echo ""
    # Make sure setup.sh is executable
    chmod +x setup.sh
    bash setup.sh
    
    # ุงูุชุญูู ูุฑุฉ ุฃุฎุฑู ุจุนุฏ ุงูุชุซุจูุช
    if [ ! -d "venv" ]; then
        echo "โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุชุซุจูุช. ูุฑุฌู ูุฑุงุฌุนุฉ ุงูุณุฌูุงุช."
        exit 1
    fi
fi

# ุชุดุบูู ุงูุฑูุจูุช
echo "โ ุงูุจูุฆุฉ ุฌุงูุฒุฉ."
echo "๐ ุฌุงุฑู ุชุดุบูู ุงูุณูุฑูุฑ..."
echo "๐ ุงูุชุญ ุงููุชุตูุญ ุนูู: http://<RaspberryPi_IP>:5000"
echo ""

source venv/bin/activate
python app.py
